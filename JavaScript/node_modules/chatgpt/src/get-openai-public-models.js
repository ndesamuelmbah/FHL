import dotenv from 'dotenv';
import fs from 'fs';
import fetch from "node-fetch";

dotenv.config();

const modelsEndpoint = 'https://api.openai.com/v1/models';
const headers = {
  authorization: `Bearer ${process.env.OPENAI_API_KEY}`
};

getOpenaiPublicModels();

function getOpenaiPublicModels(){
  fetch(modelsEndpoint, { headers })
    .then((response) => response.json())
    .then((data) => {
      fs.writeFileSync('openai-public-models.json', JSON.stringify(data, null, 4), 'utf-8');
      console.log('Data has been written to data.json file');
    })
    .catch(error => {
      console.error(error);
    });
}
